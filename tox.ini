[tox]
envlist = py{36,37,38,39,310,311},docs,coverage,numpy{310,311}
minversion = 4.4

[testenv]
usedevelop = True
passenv = TOXENV, CI, TRAVIS, TRAVIS_*, CODECOV*, OPENAI*, ANTHROPIC*
deps = 
    -r requirements.txt
commands =
    pytest {posargs} --openai {env:OPENAI_API_KEY}

[testenv:py]
description =
    py{36,37,38,39,310,311}: Run unit tests against {envname}
extras = tests
commands =
    {[testenv]commands}

[testenv:numpy310,numpy311]
description =
    py{numpy310,numpy311}: Run unit tests against {envname}
extras = dev
commands =
    {[testenv]commands}

[testenv:coverage]
description =
    Run code coverage checks and upload to CodeCov.
setenv =
    PYTEST_ADDOPTS = --cov ./highcharts_core --cov-config {toxinidir}/setup.cfg
allowlist_externals = codecov
extras = dev
commands =
    {[testenv]commands}

[testenv:docs]
description =
    Test whether the documentation builds correctly prior to publication.
basepython = python
extras = dev
changedir = docs
commands =
    sphinx-build -b html . _build/html